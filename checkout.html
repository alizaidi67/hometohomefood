<!DOCTYPE html>
<html lang="en">

        <head>
                <meta charset="utf-8">
                <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
                <meta http-equiv="x-ua-compatible" content="ie=edge">
                <title>Checkout</title>
                <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous">
                <link rel="stylesheet" href="style.css"> 
                <link href='https://fonts.googleapis.com/css?family=Old+Standard+TT' rel='stylesheet' type='text/css'>
                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
            
              
                  <link rel="stylesheet" href="css/style.css">
            </head>
            
            <body>
                    <nav class="nav_bar" role="navigation">
                        <div class="float-sm-left"> <h1>Home To Home Food</h1></div>      
                      <div class="nav_logo"><span>Home to Home Food</span>
                              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="87" height="42" viewbox="0 0 87 42">
                                <defs>
                                  <path id="a" d="M-577-60H663v2000H-577z"></path>
                                </defs>
                                <clippath id="b">
                                  <use xlink:href="#a" overflow="visible"></use>
                                </clippath>
                                <g clip-path="url(#b)">
                                  <defs>
                                    <path id="c" d="M41.004 0C29.404 0 20 9.4 20 21c0 11.598 9.4 21 21.004 21h10.992C63.596 42 73 32.6 73 21 73 9.402 63.6 0 51.996 0H41.004z"></path>
                                  </defs>
                                  <clippath id="d">
                                    <use xlink:href="#c" overflow="visible"></use>
                                  </clippath>
                                  <path clip-path="url(#d)" fill="none" stroke="#B0B3C4" stroke-width="10" stroke-miterlimit="10" d="M41.004 0C29.404 0 20 9.4 20 21c0 11.598 9.4 21 21.004 21h10.992C63.596 42 73 32.6 73 21 73 9.402 63.6 0 51.996 0H41.004z"></path>
                                </g>
                                <g id="knife">
                                  <defs>
                                    <path id="e" d="M-577-60H663v2000H-577z"></path>
                                  </defs>
                                  <clippath id="f">
                                    <use xlink:href="#e" overflow="visible"></use>
                                  </clippath>
                                  <g clip-path="url(#f)">
                                    <defs>
                                      <path id="g" d="M85.323 5.945l-6.323 15 5.01 2.377s.762 9.735 1.012 12.623c.62 1.764 2.003.752 2.003 0v-30s-.78-1.957-1.702 0z"></path>
                                    </defs>
                                    <clippath id="h">
                                      <use xlink:href="#g" overflow="visible"></use>
                                    </clippath>
                                    <path clip-path="url(#h)" fill-rule="evenodd" clip-rule="evenodd" fill="#B0B3C4" d="M74 .075h18.025v41.85H74z"></path>
                                  </g>
                                </g>
                                <g id="fork">
                                  <defs>
                                    <path id="i" d="M-577-60H663v2000H-577z"></path>
                                  </defs>
                                  <clippath id="j">
                                    <use xlink:href="#i" overflow="visible"></use>
                                  </clippath>
                                  <g clip-path="url(#j)">
                                    <defs>
                                      <path id="k" d="M9.928 7h1.355l2.272 15-5.628 1.674V37c-.982 2.084-2 0-2 0V23.674L.3 22 2.572 7h1.355v13c1 1.45 2 0 2 0V7h2v13c.974 1.33 2 0 2 0V7z"></path>
                                    </defs>
                                    <clippath id="l">
                                      <use xlink:href="#k" overflow="visible"></use>
                                    </clippath>
                                    <path clip-path="url(#l)" fill-rule="evenodd" clip-rule="evenodd" fill="#B0B3C4" d="M-4.7 2h23.256v40.926H-4.7z"></path>
                                  </g>
                                </g>
                              </svg>
                            </div>
                            <div class="nav_toggle"><span class="hamb_toggle"><span class="line line-1"></span><span class="line line-2"></span><span class="line line-3"></span></span><span class="toggle_name">MENU</span></div>
                          </nav>
                          <div class="blocks_container" role="main">
                            <div class="nav_overlay">
                              <div class="fix_top">
                                <svg xmlns="http://www.w3.org/2000/svg" width="349.629" height="349.629" viewbox="0 0 349.629 349.629">
                                  <path d="M174.827 73.433L0 253.42l23.434 22.77 151.393-155.872 151.39 155.878 23.412-22.776"></path>
                                </svg>
                              </div>
                              <nav class="overlay_menu">
                                <ul>
                                  <li><a href="index.html">Home</a></li>
                                  <li><a href="products.html">Food Items</a></li>
                                  <li><a href="about.html">About Us</a></li>
                                  
                                </ul>
                              </nav>
                            </div>
                <header class="header">
                    <div class="htop">
                        <div id="checkoutdiv " class="container">
                            <div class="row">
                                <div class="col-md-6 text-xs-right ">(<span class="items text-muted"></span> <small>items</small>) <span class="total"></span> </div>
                                <div class="col-md-6 text-xs-right"> <span class="btn btn-success" data-toggle="modal" data-target="#cart">Open Shopping Cart</span><a href="checkout.html" class="btn btn-primary">Proceed to checkout</a></div>
                            </div>
                        </div>
                    </div>
                    <div class="hbot">
                        <div class="container">
                            <nav class="navbar navbar-full navbar-dark bg-inverse">
                                <button class="navbar-toggler light float-xs-right hidden-sm-up" type="button" data-toggle="collapse" data-target="#nvbar"></button>
                                <div id="nvbar" class="collapse navbar-toggleable-xs">
                                    <ul class="nav navbar-nav float-sm-right ">
                                        <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                                        <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
                                        <li class="nav-item"><a class="nav-link" href="products.html">Products</a></li>
                                    </ul>
                                </div>
                            </nav>
                        </div>
                    </div>
    <div class="container">
        <h1>Shopping Checkout</h1>
        <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
            <input type="hidden" name="cmd" value="_cart">
            <input type="hidden" name="upload" value="1">
            <input type="hidden" name="business" value="seller@dezignerfotos.com">
            <table class="table table-hover">
                <thead class="thead-inverse">
                    <tr>
                        <th>Remove</th>
                        <th>Qty</th>
                        <th>Item Name</th>
                        <th>Cost</th>
                        <th class="text-xs-right">Subtotal</th>
                    </tr>
                </thead>
                <tbody id="output"> </tbody>
            </table>
            <input type="submit" class="btn btn-primary btn-block" value="Checkout with PayPal"> <a href="products.html" class="btn btn-success">Continue Shopping</a> </form>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>
        var shopcart = [];
        $(document).ready(function () {
            outputCart();
            $('#output').on('click','.remove-item',function(){
                var itemToDelete = $('.remove-item').index(this);
                shopcart.splice(itemToDelete,1);
                sessionStorage["sca"] = JSON.stringify(shopcart);
                outputCart();              
            })
            
            
            
            $('#output').on('change', '.dynqua', function () {
                var iteminfo = $(this.dataset)[0];
                var itemincart = false;
                var removeItem = false;
                var itemToDelete = 0;
                console.log(shopcart);
                var qty = $(this).val();
                $.each(shopcart, function (index, value) {
                    if (value.id == iteminfo.id) {
                        if (qty <= 0) {
                            removeItem = true;
                            itemToDelete = index;
                        }else{
                            shopcart[index].qty = qty;
                            itemincart = true;
                        }
                    }
                })
                if(removeItem){
                    shopcart.splice(itemToDelete,1);
                }
                
                sessionStorage["sca"] = JSON.stringify(shopcart);
                outputCart();
            })

            function outputCart() {
                if (sessionStorage["sca"] != null) {
                    shopcart = JSON.parse(sessionStorage["sca"].toString());
                }
                console.log(sessionStorage["sca"]);
                console.log(shopcart);
                var holderHTML = '';
                var total = 0;
                var itemCnt = 0;
                $.each(shopcart, function (index, value) {
                    var stotal = value.qty * value.price;
                    var a = (index + 1);
                    total += stotal;
                    itemCnt += parseInt(value.qty);
                    holderHTML += '<tr><td><span class="btn btn-danger remove-item">x</span></td><td><input size="5"  type="number" class="dynqua" name="quantity_' + a + '" value="' + value.qty + '" data-id="' + value.id + '"></td><td><input type="hidden" name="item_name_' + a + '" value="' + value.name + ' ' + value.s + '">' + value.name + '(' + value.s + ')</td><td><input type="hidden" name="amount_' + a + '" value="' + formatMoney(value.price) + '"> $' + formatMoney(value.price) + ' </td><td class="text-xs-right"> ' + formatMoney(stotal) + '</td></tr>';
                })
                holderHTML += '<tr><td colspan="4" class="text-xs-right">Total</td><td class="text-xs-right">' + formatMoney(total) + '</td></tr>';
                $('#output').html(holderHTML);
            }

            function formatMoney(n) {
                return '₹' + n;
            }
        })
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js" integrity="sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/js/bootstrap.min.js" integrity="sha384-BLiI7JTZm+JWlgKa0M0kGRpJbF2J8q+qreVrKBC47e3K6BW78kGLrCkeRX6I9RoK" crossorigin="anonymous"></script>
    <script src="script.js"></script>
    <script  src="js/index.js"></script>
</body>

</html>